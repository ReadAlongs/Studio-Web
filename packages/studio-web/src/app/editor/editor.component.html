<section class="container mt-1"></section>
<section id="editor">
  <div class="container mt-4">
    <div class="row mb-3">
      <div class="col-8">
        <h1 i18n="Welcome message for app editor" id="welcome-header">
          Welcome to the ReadAlong Studio Editor
        </h1>
        <p i18n="Editor synopsis">
          This is a tool to help you edit your existing 'readalongs'. To get
          started, click on the tour button below, and follow the steps.
        </p>
        <div class="row mt-0 justify-content-center">
          <button
            i18n="Take the tour"
            class="mb-4 col-9 center text-center plausible-event-name=EditorTour"
            mat-raised-button
            color="primary"
            (click)="startTour()"
          >
            Take the tour!
          </button>
        </div>
      </div>
      @if (editorService.uploadFormGroup.valid) {
        <div class="col-4">
          <ras-shared-download
            (downloadButtonClicked)="download($event)"
          ></ras-shared-download>
        </div>
      }
    </div>
    <div class="row justify-content-center mb-6">
      <div class="col">
        <h2 i18n="Title for upload box" class="title">
          Select an offline HTML ReadAlong file.
        </h2>
        <p i18n="Description for upload box" class="subtitle">
          To get this file, you should have created a ReadAlong using the
          <a routerLink="/" target="_blank" rel="noopener noreferrer">
            <mat-icon inline style="vertical-align: middle">launch</mat-icon>
            Studio</a
          >, and then selected "Offline HTML" as the output. Or, you can use the
          Offline-HTML file included in the Web Bundle download format.
        </p>
        <input
          #textInputElement
          (change)="onRasFileSelected($event)"
          class="form-control"
          name="text"
          type="file"
          id="updateRAS"
          accept="{{ htmlUploadAccepts }}"
        />
      </div>
    </div>
  </div>
  <!--div class="fluid-container">
  <div class="row flex-nowrap">
    <div class="col col-lg-7">

    </div>
    @if(rasFileIsLoaded) {
    <div class="col-12 bg-fade  col-lg-5 pt-lg-5 d-lg-flex flex-row">
    }


    </div>
  </div></div-->
  <div
    class="d-flex justify-content-center flex-column flex-xl-row flex-xl-nowrap bg-light mt-3 full-height"
  >
    <div id="readalongContainer" #readalongContainer></div>
    <div
      [class.d-none]="!rasFileIsLoaded"
      [class.d-lg-flex]="rasFileIsLoaded"
      class="flex-row"
    >
      <div
        class="m-0 p-0 handle me-xl-2 d-none d-xl-block"
        #handle
        draggable="true"
        id="handle"
      ></div>
      <app-wc-styling #styleWindow id="styleWindow"></app-wc-styling>
    </div>
  </div>

  <div class="container">
    <div class="row justify-content-center mt-5 mb-5">
      <div class="col" id="audioToolbar">
        @if (editorService.audioControl$.valid) {
          <mat-toolbar>
            <span i18n="Audio Toolbar">Audio Toolbar</span>
            <span class="example-spacer"></span>
            <span id="zoomControls">
              <button
                (click)="zoomIn()"
                mat-icon-button
                class="example-icon zoom-in-icon"
                aria-label="Zoom in icon for audio waveform"
              >
                <mat-icon>zoom_in</mat-icon>
              </button>
              <button
                (click)="zoomOut()"
                mat-icon-button
                class="example-icon"
                aria-label="Zoom out icon for audio waveform"
              >
                <mat-icon>zoom_out</mat-icon>
              </button></span
            >
          </mat-toolbar>
        }
        <div
          class="pure-u-1"
          id="wavesurferContainer"
          #wavesurferContainer
        ></div>
      </div>
    </div>
  </div>
</section>
