"use strict";(self.webpackChunkStudio_Web=self.webpackChunkStudio_Web||[]).push([[415],{415:(Ee,Y,U)=>{U.r(Y),U.d(Y,{read_along:()=>O});var V=U(861),_=U(951),R=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Z=function oe(a,i,n){return a(n={path:i,exports:{},require:function(t,s){return function se(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},n.exports),n.exports}(function(a,i){!function(){var n=function(){this.init()};n.prototype={init:function(){var e=this||t;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator=typeof window<"u"&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var r=this||t;if(e=parseFloat(e),r.ctx||w(),typeof e<"u"&&e>=0&&e<=1){if(r._volume=e,r._muted)return r;r.usingWebAudio&&r.masterGain.gain.setValueAtTime(e,t.ctx.currentTime);for(var o=0;o<r._howls.length;o++)if(!r._howls[o]._webAudio)for(var u=r._howls[o]._getSoundIds(),f=0;f<u.length;f++){var h=r._howls[o]._soundById(u[f]);h&&h._node&&(h._node.volume=h._volume*e)}return r}return r._volume},mute:function(e){var r=this||t;r.ctx||w(),r._muted=e,r.usingWebAudio&&r.masterGain.gain.setValueAtTime(e?0:r._volume,t.ctx.currentTime);for(var o=0;o<r._howls.length;o++)if(!r._howls[o]._webAudio)for(var u=r._howls[o]._getSoundIds(),f=0;f<u.length;f++){var h=r._howls[o]._soundById(u[f]);h&&h._node&&(h._node.muted=!!e||h._muted)}return r},stop:function(){for(var e=this||t,r=0;r<e._howls.length;r++)e._howls[r].stop();return e},unload:function(){for(var e=this||t,r=e._howls.length-1;r>=0;r--)e._howls[r].unload();return e.usingWebAudio&&e.ctx&&typeof e.ctx.close<"u"&&(e.ctx.close(),e.ctx=null,w()),e},codecs:function(e){return(this||t)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||t;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if(typeof Audio<"u")try{typeof(new Audio).oncanplaythrough>"u"&&(e._canPlayEvent="canplay")}catch{e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch{}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||t,r=null;try{r=typeof Audio<"u"?new Audio:null}catch{return e}if(!r||"function"!=typeof r.canPlayType)return e;var o=r.canPlayType("audio/mpeg;").replace(/^no$/,""),u=e._navigator?e._navigator.userAgent:"",f=u.match(/OPR\/([0-6].)/g),h=f&&parseInt(f[0].split("/")[1],10)<33,c=-1!==u.indexOf("Safari")&&-1===u.indexOf("Chrome"),b=u.match(/Version\/(.*?) /),v=c&&b&&parseInt(b[1],10)<15;return e._codecs={mp3:!(h||!o&&!r.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!o,opus:!!r.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(r.canPlayType('audio/wav; codecs="1"')||r.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!r.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!r.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(r.canPlayType("audio/x-m4a;")||r.canPlayType("audio/m4a;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(r.canPlayType("audio/x-m4b;")||r.canPlayType("audio/m4b;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(r.canPlayType("audio/x-mp4;")||r.canPlayType("audio/mp4;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(v||!r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(v||!r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!r.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(r.canPlayType("audio/x-flac;")||r.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||t;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,!e._mobileUnloaded&&44100!==e.ctx.sampleRate&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var r=function(o){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var u=new Audio;u._unlocked=!0,e._releaseHtml5Audio(u)}catch{e.noAudio=!0;break}for(var f=0;f<e._howls.length;f++)if(!e._howls[f]._webAudio)for(var h=e._howls[f]._getSoundIds(),c=0;c<h.length;c++){var b=e._howls[f]._soundById(h[c]);b&&b._node&&!b._node._unlocked&&(b._node._unlocked=!0,b._node.load())}e._autoResume();var v=e.ctx.createBufferSource();v.buffer=e._scratchBuffer,v.connect(e.ctx.destination),typeof v.start>"u"?v.noteOn(0):v.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),v.onended=function(){v.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",r,!0),document.removeEventListener("touchend",r,!0),document.removeEventListener("click",r,!0),document.removeEventListener("keydown",r,!0);for(var A=0;A<e._howls.length;A++)e._howls[A]._emit("unlock")}};return document.addEventListener("touchstart",r,!0),document.addEventListener("touchend",r,!0),document.addEventListener("click",r,!0),document.addEventListener("keydown",r,!0),e}},_obtainHtml5Audio:function(){var e=this||t;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var r=(new Audio).play();return r&&typeof Promise<"u"&&(r instanceof Promise||"function"==typeof r.then)&&r.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var r=this||t;return e._unlocked&&r._html5AudioPool.push(e),r},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&!(typeof e.ctx.suspend>"u")&&t.usingWebAudio){for(var r=0;r<e._howls.length;r++)if(e._howls[r]._webAudio)for(var o=0;o<e._howls[r]._sounds.length;o++)if(!e._howls[r]._sounds[o]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var u=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(u,u)}},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&!(typeof e.ctx.resume>"u")&&t.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then(function(){e.state="running";for(var r=0;r<e._howls.length;r++)e._howls[r]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var t=new n,s=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};s.prototype={init:function(e){var r=this;return t.ctx||w(),r._autoplay=e.autoplay||!1,r._format="string"!=typeof e.format?e.format:[e.format],r._html5=e.html5||!1,r._muted=e.mute||!1,r._loop=e.loop||!1,r._pool=e.pool||5,r._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,r._rate=e.rate||1,r._sprite=e.sprite||{},r._src="string"!=typeof e.src?e.src:[e.src],r._volume=void 0!==e.volume?e.volume:1,r._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},r._duration=0,r._state="unloaded",r._sounds=[],r._endTimers={},r._queue=[],r._playLock=!1,r._onend=e.onend?[{fn:e.onend}]:[],r._onfade=e.onfade?[{fn:e.onfade}]:[],r._onload=e.onload?[{fn:e.onload}]:[],r._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],r._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],r._onpause=e.onpause?[{fn:e.onpause}]:[],r._onplay=e.onplay?[{fn:e.onplay}]:[],r._onstop=e.onstop?[{fn:e.onstop}]:[],r._onmute=e.onmute?[{fn:e.onmute}]:[],r._onvolume=e.onvolume?[{fn:e.onvolume}]:[],r._onrate=e.onrate?[{fn:e.onrate}]:[],r._onseek=e.onseek?[{fn:e.onseek}]:[],r._onunlock=e.onunlock?[{fn:e.onunlock}]:[],r._onresume=[],r._webAudio=t.usingWebAudio&&!r._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(r),r._autoplay&&r._queue.push({event:"play",action:function(){r.play()}}),r._preload&&"none"!==r._preload&&r.load(),r},load:function(){var e=this,r=null;if(t.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var o=0;o<e._src.length;o++){var u,f;if(e._format&&e._format[o])u=e._format[o];else{if("string"!=typeof(f=e._src[o])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(u=/^data:audio\/([^;,]+);/i.exec(f))||(u=/\.([^.]+)$/.exec(f.split("?",1)[0])),u&&(u=u[1].toLowerCase())}if(u||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),u&&t.codecs(u)){r=e._src[o];break}}if(r)return e._src=r,e._state="loading","https:"===window.location.protocol&&"http:"===r.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new l(e),e._webAudio&&p(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,r){var o=this,u=null;if("number"==typeof e)u=e,e=null;else{if("string"==typeof e&&"loaded"===o._state&&!o._sprite[e])return null;if(typeof e>"u"&&(e="__default",!o._playLock)){for(var f=0,h=0;h<o._sounds.length;h++)o._sounds[h]._paused&&!o._sounds[h]._ended&&(f++,u=o._sounds[h]._id);1===f?e=null:u=null}}var c=u?o._soundById(u):o._inactiveSound();if(!c)return null;if(u&&!e&&(e=c._sprite||"__default"),"loaded"!==o._state){c._sprite=e,c._ended=!1;var b=c._id;return o._queue.push({event:"play",action:function(){o.play(b)}}),b}if(u&&!c._paused)return r||o._loadQueue("play"),c._id;o._webAudio&&t._autoResume();var v=Math.max(0,c._seek>0?c._seek:o._sprite[e][0]/1e3),A=Math.max(0,(o._sprite[e][0]+o._sprite[e][1])/1e3-v),L=1e3*A/Math.abs(c._rate),F=o._sprite[e][0]/1e3,G=(o._sprite[e][0]+o._sprite[e][1])/1e3;c._sprite=e,c._ended=!1;var Q=function(){c._paused=!1,c._seek=v,c._start=F,c._stop=G,c._loop=!(!c._loop&&!o._sprite[e][2])};if(!(v>=G)){var x=c._node;if(o._webAudio){var ne=function(){o._playLock=!1,Q(),o._refreshBuffer(c),x.gain.setValueAtTime(c._muted||o._muted?0:c._volume,t.ctx.currentTime),c._playStart=t.ctx.currentTime,typeof x.bufferSource.start>"u"?x.bufferSource.noteGrainOn(0,v,c._loop?86400:A):x.bufferSource.start(0,v,c._loop?86400:A),L!==1/0&&(o._endTimers[c._id]=setTimeout(o._ended.bind(o,c),L)),r||setTimeout(function(){o._emit("play",c._id),o._loadQueue()},0)};"running"===t.state&&"interrupted"!==t.ctx.state?ne():(o._playLock=!0,o.once("resume",ne),o._clearTimer(c._id))}else{var ie=function(){x.currentTime=v,x.muted=c._muted||o._muted||t._muted||x.muted,x.volume=c._volume*t.volume(),x.playbackRate=c._rate;try{var C=x.play();if(C&&typeof Promise<"u"&&(C instanceof Promise||"function"==typeof C.then)?(o._playLock=!0,Q(),C.then(function(){o._playLock=!1,x._unlocked=!0,r?o._loadQueue():o._emit("play",c._id)}).catch(function(){o._playLock=!1,o._emit("playerror",c._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),c._ended=!0,c._paused=!0})):r||(o._playLock=!1,Q(),o._emit("play",c._id)),x.playbackRate=c._rate,x.paused)return void o._emit("playerror",c._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||c._loop?o._endTimers[c._id]=setTimeout(o._ended.bind(o,c),L):(o._endTimers[c._id]=function(){o._ended(c),x.removeEventListener("ended",o._endTimers[c._id],!1)},x.addEventListener("ended",o._endTimers[c._id],!1))}catch(ke){o._emit("playerror",c._id,ke)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===x.src&&(x.src=o._src,x.load());var Te=window&&window.ejecta||!x.readyState&&t._navigator.isCocoonJS;if(x.readyState>=3||Te)ie();else{o._playLock=!0,o._state="loading";var ae=function(){o._state="loaded",ie(),x.removeEventListener(t._canPlayEvent,ae,!1)};x.addEventListener(t._canPlayEvent,ae,!1),o._clearTimer(c._id)}}return c._id}o._ended(c)},pause:function(e){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"pause",action:function(){r.pause(e)}}),r;for(var o=r._getSoundIds(e),u=0;u<o.length;u++){r._clearTimer(o[u]);var f=r._soundById(o[u]);if(f&&!f._paused&&(f._seek=r.seek(o[u]),f._rateSeek=0,f._paused=!0,r._stopFade(o[u]),f._node))if(r._webAudio){if(!f._node.bufferSource)continue;typeof f._node.bufferSource.stop>"u"?f._node.bufferSource.noteOff(0):f._node.bufferSource.stop(0),r._cleanBuffer(f._node)}else(!isNaN(f._node.duration)||f._node.duration===1/0)&&f._node.pause();arguments[1]||r._emit("pause",f?f._id:null)}return r},stop:function(e,r){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"stop",action:function(){o.stop(e)}}),o;for(var u=o._getSoundIds(e),f=0;f<u.length;f++){o._clearTimer(u[f]);var h=o._soundById(u[f]);h&&(h._seek=h._start||0,h._rateSeek=0,h._paused=!0,h._ended=!0,o._stopFade(u[f]),h._node&&(o._webAudio?h._node.bufferSource&&(typeof h._node.bufferSource.stop>"u"?h._node.bufferSource.noteOff(0):h._node.bufferSource.stop(0),o._cleanBuffer(h._node)):(!isNaN(h._node.duration)||h._node.duration===1/0)&&(h._node.currentTime=h._start||0,h._node.pause(),h._node.duration===1/0&&o._clearSound(h._node))),r||o._emit("stop",h._id))}return o},mute:function(e,r){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"mute",action:function(){o.mute(e,r)}}),o;if(typeof r>"u"){if("boolean"!=typeof e)return o._muted;o._muted=e}for(var u=o._getSoundIds(r),f=0;f<u.length;f++){var h=o._soundById(u[f]);h&&(h._muted=e,h._interval&&o._stopFade(h._id),o._webAudio&&h._node?h._node.gain.setValueAtTime(e?0:h._volume,t.ctx.currentTime):h._node&&(h._node.muted=!!t._muted||e),o._emit("mute",h._id))}return o},volume:function(){var o,u,c,e=this,r=arguments;if(0===r.length)return e._volume;if(1===r.length||2===r.length&&typeof r[1]>"u"){var f=e._getSoundIds(),h=f.indexOf(r[0]);h>=0?u=parseInt(r[0],10):o=parseFloat(r[0])}else r.length>=2&&(o=parseFloat(r[0]),u=parseInt(r[1],10));if(!(typeof o<"u"&&o>=0&&o<=1))return(c=u?e._soundById(u):e._sounds[0])?c._volume:0;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"volume",action:function(){e.volume.apply(e,r)}}),e;typeof u>"u"&&(e._volume=o),u=e._getSoundIds(u);for(var b=0;b<u.length;b++)(c=e._soundById(u[b]))&&(c._volume=o,r[2]||e._stopFade(u[b]),e._webAudio&&c._node&&!c._muted?c._node.gain.setValueAtTime(o,t.ctx.currentTime):c._node&&!c._muted&&(c._node.volume=o*t.volume()),e._emit("volume",c._id));return e},fade:function(e,r,o,u){var f=this;if("loaded"!==f._state||f._playLock)return f._queue.push({event:"fade",action:function(){f.fade(e,r,o,u)}}),f;e=Math.min(Math.max(0,parseFloat(e)),1),r=Math.min(Math.max(0,parseFloat(r)),1),o=parseFloat(o),f.volume(e,u);for(var h=f._getSoundIds(u),c=0;c<h.length;c++){var b=f._soundById(h[c]);if(b){if(u||f._stopFade(h[c]),f._webAudio&&!b._muted){var v=t.ctx.currentTime,A=v+o/1e3;b._volume=e,b._node.gain.setValueAtTime(e,v),b._node.gain.linearRampToValueAtTime(r,A)}f._startFadeInterval(b,e,r,o,h[c],typeof u>"u")}}return f},_startFadeInterval:function(e,r,o,u,f,h){var c=this,b=r,v=o-r,A=Math.abs(v/.01),L=Math.max(4,A>0?u/A:u),F=Date.now();e._fadeTo=o,e._interval=setInterval(function(){var G=(Date.now()-F)/u;F=Date.now(),b+=v*G,b=Math.round(100*b)/100,b=v<0?Math.max(o,b):Math.min(o,b),c._webAudio?e._volume=b:c.volume(b,e._id,!0),h&&(c._volume=b),(o<r&&b<=o||o>r&&b>=o)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,c.volume(o,e._id),c._emit("fade",e._id))},L)},_stopFade:function(e){var r=this,o=r._soundById(e);return o&&o._interval&&(r._webAudio&&o._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(o._interval),o._interval=null,r.volume(o._fadeTo,e),o._fadeTo=null,r._emit("fade",e)),r},loop:function(){var o,u,f,e=this,r=arguments;if(0===r.length)return e._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(f=e._soundById(parseInt(r[0],10)))&&f._loop;e._loop=o=r[0]}else 2===r.length&&(o=r[0],u=parseInt(r[1],10));for(var h=e._getSoundIds(u),c=0;c<h.length;c++)(f=e._soundById(h[c]))&&(f._loop=o,e._webAudio&&f._node&&f._node.bufferSource&&(f._node.bufferSource.loop=o,o&&(f._node.bufferSource.loopStart=f._start||0,f._node.bufferSource.loopEnd=f._stop,e.playing(h[c])&&(e.pause(h[c],!0),e.play(h[c],!0)))));return e},rate:function(){var o,u,c,e=this,r=arguments;if(0===r.length)u=e._sounds[0]._id;else if(1===r.length){var f=e._getSoundIds(),h=f.indexOf(r[0]);h>=0?u=parseInt(r[0],10):o=parseFloat(r[0])}else 2===r.length&&(o=parseFloat(r[0]),u=parseInt(r[1],10));if("number"!=typeof o)return(c=e._soundById(u))?c._rate:e._rate;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,r)}}),e;typeof u>"u"&&(e._rate=o),u=e._getSoundIds(u);for(var b=0;b<u.length;b++)if(c=e._soundById(u[b])){e.playing(u[b])&&(c._rateSeek=e.seek(u[b]),c._playStart=e._webAudio?t.ctx.currentTime:c._playStart),c._rate=o,e._webAudio&&c._node&&c._node.bufferSource?c._node.bufferSource.playbackRate.setValueAtTime(o,t.ctx.currentTime):c._node&&(c._node.playbackRate=o);var v=e.seek(u[b]),A=(e._sprite[c._sprite][0]+e._sprite[c._sprite][1])/1e3-v,L=1e3*A/Math.abs(c._rate);(e._endTimers[u[b]]||!c._paused)&&(e._clearTimer(u[b]),e._endTimers[u[b]]=setTimeout(e._ended.bind(e,c),L)),e._emit("rate",c._id)}return e},seek:function(){var o,u,e=this,r=arguments;if(0===r.length)e._sounds.length&&(u=e._sounds[0]._id);else if(1===r.length){var f=e._getSoundIds(),h=f.indexOf(r[0]);h>=0?u=parseInt(r[0],10):e._sounds.length&&(u=e._sounds[0]._id,o=parseFloat(r[0]))}else 2===r.length&&(o=parseFloat(r[0]),u=parseInt(r[1],10));if(typeof u>"u")return 0;if("number"==typeof o&&("loaded"!==e._state||e._playLock))return e._queue.push({event:"seek",action:function(){e.seek.apply(e,r)}}),e;var c=e._soundById(u);if(c){if(!("number"==typeof o&&o>=0)){if(e._webAudio){var L=e.playing(u)?t.ctx.currentTime-c._playStart:0,F=c._rateSeek?c._rateSeek-c._seek:0;return c._seek+(F+L*Math.abs(c._rate))}return c._node.currentTime}var b=e.playing(u);b&&e.pause(u,!0),c._seek=o,c._ended=!1,e._clearTimer(u),!e._webAudio&&c._node&&!isNaN(c._node.duration)&&(c._node.currentTime=o);var v=function(){b&&e.play(u,!0),e._emit("seek",u)};if(b&&!e._webAudio){var A=function(){e._playLock?setTimeout(A,0):v()};setTimeout(A,0)}else v()}return e},playing:function(e){var r=this;if("number"==typeof e){var o=r._soundById(e);return!!o&&!o._paused}for(var u=0;u<r._sounds.length;u++)if(!r._sounds[u]._paused)return!0;return!1},duration:function(e){var r=this,o=r._duration,u=r._soundById(e);return u&&(o=r._sprite[u._sprite][1]/1e3),o},state:function(){return this._state},unload:function(){for(var e=this,r=e._sounds,o=0;o<r.length;o++)r[o]._paused||e.stop(r[o]._id),e._webAudio||(e._clearSound(r[o]._node),r[o]._node.removeEventListener("error",r[o]._errorFn,!1),r[o]._node.removeEventListener(t._canPlayEvent,r[o]._loadFn,!1),r[o]._node.removeEventListener("ended",r[o]._endFn,!1),t._releaseHtml5Audio(r[o]._node)),delete r[o]._node,e._clearTimer(r[o]._id);var u=t._howls.indexOf(e);u>=0&&t._howls.splice(u,1);var f=!0;for(o=0;o<t._howls.length;o++)if(t._howls[o]._src===e._src||e._src.indexOf(t._howls[o]._src)>=0){f=!1;break}return d&&f&&delete d[e._src],t.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,r,o,u){return"function"==typeof r&&this["_on"+e].push(u?{id:o,fn:r,once:u}:{id:o,fn:r}),this},off:function(e,r,o){var u=this,f=u["_on"+e],h=0;if("number"==typeof r&&(o=r,r=null),r||o)for(h=0;h<f.length;h++){var c=o===f[h].id;if(r===f[h].fn&&c||!r&&c){f.splice(h,1);break}}else if(e)u["_on"+e]=[];else{var b=Object.keys(u);for(h=0;h<b.length;h++)0===b[h].indexOf("_on")&&Array.isArray(u[b[h]])&&(u[b[h]]=[])}return u},once:function(e,r,o){return this.on(e,r,o,1),this},_emit:function(e,r,o){for(var u=this,f=u["_on"+e],h=f.length-1;h>=0;h--)(!f[h].id||f[h].id===r||"load"===e)&&(setTimeout(function(c){c.call(this,r,o)}.bind(u,f[h].fn),0),f[h].once&&u.off(e,f[h].fn,f[h].id));return u._loadQueue(e),u},_loadQueue:function(e){var r=this;if(r._queue.length>0){var o=r._queue[0];o.event===e&&(r._queue.shift(),r._loadQueue()),e||o.action()}return r},_ended:function(e){var r=this,o=e._sprite;if(!r._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(r._ended.bind(r,e),100),r;var u=!(!e._loop&&!r._sprite[o][2]);if(r._emit("end",e._id),!r._webAudio&&u&&r.stop(e._id,!0).play(e._id),r._webAudio&&u){r._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=t.ctx.currentTime;var f=1e3*(e._stop-e._start)/Math.abs(e._rate);r._endTimers[e._id]=setTimeout(r._ended.bind(r,e),f)}return r._webAudio&&!u&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,r._clearTimer(e._id),r._cleanBuffer(e._node),t._autoSuspend()),!r._webAudio&&!u&&r.stop(e._id,!0),r},_clearTimer:function(e){var r=this;if(r._endTimers[e]){if("function"!=typeof r._endTimers[e])clearTimeout(r._endTimers[e]);else{var o=r._soundById(e);o&&o._node&&o._node.removeEventListener("ended",r._endTimers[e],!1)}delete r._endTimers[e]}return r},_soundById:function(e){for(var r=this,o=0;o<r._sounds.length;o++)if(e===r._sounds[o]._id)return r._sounds[o];return null},_inactiveSound:function(){var e=this;e._drain();for(var r=0;r<e._sounds.length;r++)if(e._sounds[r]._ended)return e._sounds[r].reset();return new l(e)},_drain:function(){var e=this,r=e._pool,o=0,u=0;if(!(e._sounds.length<r)){for(u=0;u<e._sounds.length;u++)e._sounds[u]._ended&&o++;for(u=e._sounds.length-1;u>=0;u--){if(o<=r)return;e._sounds[u]._ended&&(e._webAudio&&e._sounds[u]._node&&e._sounds[u]._node.disconnect(0),e._sounds.splice(u,1),o--)}}},_getSoundIds:function(e){if(typeof e>"u"){for(var o=[],u=0;u<this._sounds.length;u++)o.push(this._sounds[u]._id);return o}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=t.ctx.createBufferSource(),e._node.bufferSource.buffer=d[this._src],e._node.bufferSource.connect(e._panner?e._panner:e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,t.ctx.currentTime),this},_cleanBuffer:function(e){var o=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(t._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),o))try{e.bufferSource.buffer=t._scratchBuffer}catch{}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var l=function(e){this._parent=e,this.init()};l.prototype={init:function(){var e=this,r=e._parent;return e._muted=r._muted,e._loop=r._loop,e._volume=r._volume,e._rate=r._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,r._sounds.push(e),e.create(),e},create:function(){var e=this,r=e._parent,o=t._muted||e._muted||e._parent._muted?0:e._volume;return r._webAudio?(e._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),e._node.gain.setValueAtTime(o,t.ctx.currentTime),e._node.paused=!0,e._node.connect(t.masterGain)):t.noAudio||(e._node=t._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(t._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=r._src,e._node.preload=!0===r._preload?"auto":r._preload,e._node.volume=o*t.volume(),e._node.load()),e},reset:function(){var e=this,r=e._parent;return e._muted=r._muted,e._loop=r._loop,e._volume=r._volume,e._rate=r._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,r=e._parent;r._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(r._sprite).length&&(r._sprite={__default:[0,1e3*r._duration]}),"loaded"!==r._state&&(r._state="loaded",r._emit("load"),r._loadQueue()),e._node.removeEventListener(t._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,r=e._parent;r._duration===1/0&&(r._duration=Math.ceil(10*e._node.duration)/10,r._sprite.__default[1]===1/0&&(r._sprite.__default[1]=1e3*r._duration),r._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var d={},p=function(e){var r=e._src;if(d[r])return e._duration=d[r].duration,void g(e);if(/^data:[^;]+;base64,/.test(r)){for(var o=atob(r.split(",")[1]),u=new Uint8Array(o.length),f=0;f<o.length;++f)u[f]=o.charCodeAt(f);m(u.buffer,e)}else{var h=new XMLHttpRequest;h.open(e._xhr.method,r,!0),h.withCredentials=e._xhr.withCredentials,h.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(c){h.setRequestHeader(c,e._xhr.headers[c])}),h.onload=function(){var c=(h.status+"")[0];"0"===c||"2"===c||"3"===c?m(h.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+h.status+".")},h.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete d[r],e.load())},y(h)}},y=function(e){try{e.send()}catch{e.onerror()}},m=function(e,r){var o=function(){r._emit("loaderror",null,"Decoding audio data failed.")},u=function(f){f&&r._sounds.length>0?(d[r._src]=f,g(r,f)):o()};typeof Promise<"u"&&1===t.ctx.decodeAudioData.length?t.ctx.decodeAudioData(e).then(u).catch(o):t.ctx.decodeAudioData(e,u,o)},g=function(e,r){r&&!e._duration&&(e._duration=r.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},w=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),r=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),o=r?parseInt(r[1],10):null;if(e&&o&&o<9){var u=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!u&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};i.Howler=t,i.Howl=s,typeof R<"u"?(R.HowlerGlobal=n,R.Howler=t,R.Howl=s,R.Sound=l):typeof window<"u"&&(window.HowlerGlobal=n,window.Howler=t,window.Howl=s,window.Sound=l)}(),function(){var t;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var s=this;if(!s.ctx||!s.ctx.listener)return s;for(var l=s._howls.length-1;l>=0;l--)s._howls[l].stereo(t);return s},HowlerGlobal.prototype.pos=function(t,s,l){var d=this;return d.ctx&&d.ctx.listener?"number"!=typeof t?d._pos:(d._pos=[t,s="number"!=typeof s?d._pos[1]:s,l="number"!=typeof l?d._pos[2]:l],typeof d.ctx.listener.positionX<"u"?(d.ctx.listener.positionX.setTargetAtTime(d._pos[0],Howler.ctx.currentTime,.1),d.ctx.listener.positionY.setTargetAtTime(d._pos[1],Howler.ctx.currentTime,.1),d.ctx.listener.positionZ.setTargetAtTime(d._pos[2],Howler.ctx.currentTime,.1)):d.ctx.listener.setPosition(d._pos[0],d._pos[1],d._pos[2]),d):d},HowlerGlobal.prototype.orientation=function(t,s,l,d,p,y){var m=this;if(!m.ctx||!m.ctx.listener)return m;var g=m._orientation;return"number"!=typeof t?g:(m._orientation=[t,s="number"!=typeof s?g[1]:s,l="number"!=typeof l?g[2]:l,d="number"!=typeof d?g[3]:d,p="number"!=typeof p?g[4]:p,y="number"!=typeof y?g[5]:y],typeof m.ctx.listener.forwardX<"u"?(m.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),m.ctx.listener.forwardY.setTargetAtTime(s,Howler.ctx.currentTime,.1),m.ctx.listener.forwardZ.setTargetAtTime(l,Howler.ctx.currentTime,.1),m.ctx.listener.upX.setTargetAtTime(d,Howler.ctx.currentTime,.1),m.ctx.listener.upY.setTargetAtTime(p,Howler.ctx.currentTime,.1),m.ctx.listener.upZ.setTargetAtTime(y,Howler.ctx.currentTime,.1)):m.ctx.listener.setOrientation(t,s,l,d,p,y),m)},Howl.prototype.init=(t=Howl.prototype.init,function(s){var l=this;return l._orientation=s.orientation||[1,0,0],l._stereo=s.stereo||null,l._pos=s.pos||null,l._pannerAttr={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:360,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:360,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:0,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:"inverse",maxDistance:typeof s.maxDistance<"u"?s.maxDistance:1e4,panningModel:typeof s.panningModel<"u"?s.panningModel:"HRTF",refDistance:typeof s.refDistance<"u"?s.refDistance:1,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:1},l._onstereo=s.onstereo?[{fn:s.onstereo}]:[],l._onpos=s.onpos?[{fn:s.onpos}]:[],l._onorientation=s.onorientation?[{fn:s.onorientation}]:[],t.call(this,s)}),Howl.prototype.stereo=function(t,s){var l=this;if(!l._webAudio)return l;if("loaded"!==l._state)return l._queue.push({event:"stereo",action:function(){l.stereo(t,s)}}),l;var d=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof s>"u"){if("number"!=typeof t)return l._stereo;l._stereo=t,l._pos=[t,0,0]}for(var p=l._getSoundIds(s),y=0;y<p.length;y++){var m=l._soundById(p[y]);if(m){if("number"!=typeof t)return m._stereo;m._stereo=t,m._pos=[t,0,0],m._node&&(m._pannerAttr.panningModel="equalpower",(!m._panner||!m._panner.pan)&&n(m,d),"spatial"===d?typeof m._panner.positionX<"u"?(m._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),m._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),m._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):m._panner.setPosition(t,0,0):m._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),l._emit("stereo",m._id)}}return l},Howl.prototype.pos=function(t,s,l,d){var p=this;if(!p._webAudio)return p;if("loaded"!==p._state)return p._queue.push({event:"pos",action:function(){p.pos(t,s,l,d)}}),p;if(s="number"!=typeof s?0:s,l="number"!=typeof l?-.5:l,typeof d>"u"){if("number"!=typeof t)return p._pos;p._pos=[t,s,l]}for(var y=p._getSoundIds(d),m=0;m<y.length;m++){var g=p._soundById(y[m]);if(g){if("number"!=typeof t)return g._pos;g._pos=[t,s,l],g._node&&((!g._panner||g._panner.pan)&&n(g,"spatial"),typeof g._panner.positionX<"u"?(g._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),g._panner.positionY.setValueAtTime(s,Howler.ctx.currentTime),g._panner.positionZ.setValueAtTime(l,Howler.ctx.currentTime)):g._panner.setPosition(t,s,l)),p._emit("pos",g._id)}}return p},Howl.prototype.orientation=function(t,s,l,d){var p=this;if(!p._webAudio)return p;if("loaded"!==p._state)return p._queue.push({event:"orientation",action:function(){p.orientation(t,s,l,d)}}),p;if(s="number"!=typeof s?p._orientation[1]:s,l="number"!=typeof l?p._orientation[2]:l,typeof d>"u"){if("number"!=typeof t)return p._orientation;p._orientation=[t,s,l]}for(var y=p._getSoundIds(d),m=0;m<y.length;m++){var g=p._soundById(y[m]);if(g){if("number"!=typeof t)return g._orientation;g._orientation=[t,s,l],g._node&&(g._panner||(g._pos||(g._pos=p._pos||[0,0,-.5]),n(g,"spatial")),typeof g._panner.orientationX<"u"?(g._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),g._panner.orientationY.setValueAtTime(s,Howler.ctx.currentTime),g._panner.orientationZ.setValueAtTime(l,Howler.ctx.currentTime)):g._panner.setOrientation(t,s,l)),p._emit("orientation",g._id)}}return p},Howl.prototype.pannerAttr=function(){var l,d,p,t=this,s=arguments;if(!t._webAudio)return t;if(0===s.length)return t._pannerAttr;if(1===s.length){if("object"!=typeof s[0])return(p=t._soundById(parseInt(s[0],10)))?p._pannerAttr:t._pannerAttr;l=s[0],typeof d>"u"&&(l.pannerAttr||(l.pannerAttr={coneInnerAngle:l.coneInnerAngle,coneOuterAngle:l.coneOuterAngle,coneOuterGain:l.coneOuterGain,distanceModel:l.distanceModel,maxDistance:l.maxDistance,refDistance:l.refDistance,rolloffFactor:l.rolloffFactor,panningModel:l.panningModel}),t._pannerAttr={coneInnerAngle:typeof l.pannerAttr.coneInnerAngle<"u"?l.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof l.pannerAttr.coneOuterAngle<"u"?l.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof l.pannerAttr.coneOuterGain<"u"?l.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof l.pannerAttr.distanceModel<"u"?l.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof l.pannerAttr.maxDistance<"u"?l.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof l.pannerAttr.refDistance<"u"?l.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof l.pannerAttr.rolloffFactor<"u"?l.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof l.pannerAttr.panningModel<"u"?l.pannerAttr.panningModel:t._panningModel})}else 2===s.length&&(l=s[0],d=parseInt(s[1],10));for(var y=t._getSoundIds(d),m=0;m<y.length;m++)if(p=t._soundById(y[m])){var g=p._pannerAttr;g={coneInnerAngle:typeof l.coneInnerAngle<"u"?l.coneInnerAngle:g.coneInnerAngle,coneOuterAngle:typeof l.coneOuterAngle<"u"?l.coneOuterAngle:g.coneOuterAngle,coneOuterGain:typeof l.coneOuterGain<"u"?l.coneOuterGain:g.coneOuterGain,distanceModel:typeof l.distanceModel<"u"?l.distanceModel:g.distanceModel,maxDistance:typeof l.maxDistance<"u"?l.maxDistance:g.maxDistance,refDistance:typeof l.refDistance<"u"?l.refDistance:g.refDistance,rolloffFactor:typeof l.rolloffFactor<"u"?l.rolloffFactor:g.rolloffFactor,panningModel:typeof l.panningModel<"u"?l.panningModel:g.panningModel};var w=p._panner;w?(w.coneInnerAngle=g.coneInnerAngle,w.coneOuterAngle=g.coneOuterAngle,w.coneOuterGain=g.coneOuterGain,w.distanceModel=g.distanceModel,w.maxDistance=g.maxDistance,w.refDistance=g.refDistance,w.rolloffFactor=g.rolloffFactor,w.panningModel=g.panningModel):(p._pos||(p._pos=t._pos||[0,0,-.5]),n(p,"spatial"))}return t},Sound.prototype.init=function(t){return function(){var s=this,l=s._parent;s._orientation=l._orientation,s._stereo=l._stereo,s._pos=l._pos,s._pannerAttr=l._pannerAttr,t.call(this),s._stereo?l.stereo(s._stereo):s._pos&&l.pos(s._pos[0],s._pos[1],s._pos[2],s._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var s=this,l=s._parent;return s._orientation=l._orientation,s._stereo=l._stereo,s._pos=l._pos,s._pannerAttr=l._pannerAttr,s._stereo?l.stereo(s._stereo):s._pos?l.pos(s._pos[0],s._pos[1],s._pos[2],s._id):s._panner&&(s._panner.disconnect(0),s._panner=void 0,l._refreshBuffer(s)),t.call(this)}}(Sound.prototype.reset);var n=function(t,s){"spatial"===(s=s||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()});function j(a){return"function"==typeof a}let X=!1;const T={Promise:void 0,set useDeprecatedSynchronousErrorHandling(a){if(a){const i=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+i.stack)}else X&&console.log("RxJS: Back to a better error behavior. Thank you. <3");X=a},get useDeprecatedSynchronousErrorHandling(){return X}};function M(a){setTimeout(()=>{throw a},0)}const B={closed:!0,next(a){},error(a){if(T.useDeprecatedSynchronousErrorHandling)throw a;M(a)},complete(){}},le=Array.isArray||(a=>a&&"number"==typeof a.length),H=(()=>{function a(i){return Error.call(this),this.message=i?`${i.length} errors occurred during unsubscription:\n${i.map((n,t)=>`${t+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=i,this}return a.prototype=Object.create(Error.prototype),a})();class S{constructor(i){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,i&&(this._ctorUnsubscribe=!0,this._unsubscribe=i)}unsubscribe(){let i;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:t,_unsubscribe:s,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof S)n.remove(this);else if(null!==n)for(let d=0;d<n.length;++d)n[d].remove(this);if(j(s)){t&&(this._unsubscribe=void 0);try{s.call(this)}catch(d){i=d instanceof H?K(d.errors):[d]}}if(le(l)){let d=-1,p=l.length;for(;++d<p;){const y=l[d];if(null!==(a=y)&&"object"==typeof a)try{y.unsubscribe()}catch(m){i=i||[],m instanceof H?i=i.concat(K(m.errors)):i.push(m)}}}var a;if(i)throw new H(i)}add(i){let n=i;if(!i)return S.EMPTY;switch(typeof i){case"function":n=new S(i);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof S)){const l=n;n=new S,n._subscriptions=[l]}break;default:throw new Error("unrecognized teardown "+i+" added to Subscription.")}let{_parentOrParents:t}=n;if(null===t)n._parentOrParents=this;else if(t instanceof S){if(t===this)return n;n._parentOrParents=[t,this]}else{if(-1!==t.indexOf(this))return n;t.push(this)}const s=this._subscriptions;return null===s?this._subscriptions=[n]:s.push(n),n}remove(i){const n=this._subscriptions;if(n){const t=n.indexOf(i);-1!==t&&n.splice(t,1)}}}var a;function K(a){return a.reduce((i,n)=>i.concat(n instanceof H?n.errors:n),[])}S.EMPTY=((a=new S).closed=!0,a);const q="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class k extends S{constructor(i,n,t){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=B;break;case 1:if(!i){this.destination=B;break}if("object"==typeof i){i instanceof k?(this.syncErrorThrowable=i.syncErrorThrowable,this.destination=i,i.add(this)):(this.syncErrorThrowable=!0,this.destination=new N(this,i));break}default:this.syncErrorThrowable=!0,this.destination=new N(this,i,n,t)}}[q](){return this}static create(i,n,t){const s=new k(i,n,t);return s.syncErrorThrowable=!1,s}next(i){this.isStopped||this._next(i)}error(i){this.isStopped||(this.isStopped=!0,this._error(i))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(i){this.destination.next(i)}_error(i){this.destination.error(i),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:i}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=i,this}}class N extends k{constructor(i,n,t,s){super(),this._parentSubscriber=i;let l,d=this;j(n)?l=n:n&&(l=n.next,t=n.error,s=n.complete,n!==B&&(d=Object.create(n),j(d.unsubscribe)&&this.add(d.unsubscribe.bind(d)),d.unsubscribe=this.unsubscribe.bind(this))),this._context=d,this._next=l,this._error=t,this._complete=s}next(i){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;T.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,i)&&this.unsubscribe():this.__tryOrUnsub(this._next,i)}}error(i){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:t}=T;if(this._error)t&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,i),this.unsubscribe()):(this.__tryOrUnsub(this._error,i),this.unsubscribe());else if(n.syncErrorThrowable)t?(n.syncErrorValue=i,n.syncErrorThrown=!0):M(i),this.unsubscribe();else{if(this.unsubscribe(),t)throw i;M(i)}}}complete(){if(!this.isStopped){const{_parentSubscriber:i}=this;if(this._complete){const n=()=>this._complete.call(this._context);T.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable?(this.__tryOrSetError(i,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(i,n){try{i.call(this._context,n)}catch(t){if(this.unsubscribe(),T.useDeprecatedSynchronousErrorHandling)throw t;M(t)}}__tryOrSetError(i,n,t){if(!T.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,t)}catch(s){return T.useDeprecatedSynchronousErrorHandling?(i.syncErrorValue=s,i.syncErrorThrown=!0,!0):(M(s),!0)}return!1}_unsubscribe(){const{_parentSubscriber:i}=this;this._context=null,this._parentSubscriber=null,i.unsubscribe()}}const fe="function"==typeof Symbol&&Symbol.observable||"@@observable";function he(a){return a}let z=(()=>{class a{constructor(n){this._isScalar=!1,n&&(this._subscribe=n)}lift(n){const t=new a;return t.source=this,t.operator=n,t}subscribe(n,t,s){const{operator:l}=this,d=function de(a,i,n){if(a){if(a instanceof k)return a;if(a[q])return a[q]()}return a||i||n?new k(a,i,n):new k(B)}(n,t,s);if(d.add(l?l.call(d,this.source):this.source||T.useDeprecatedSynchronousErrorHandling&&!d.syncErrorThrowable?this._subscribe(d):this._trySubscribe(d)),T.useDeprecatedSynchronousErrorHandling&&d.syncErrorThrowable&&(d.syncErrorThrowable=!1,d.syncErrorThrown))throw d.syncErrorValue;return d}_trySubscribe(n){try{return this._subscribe(n)}catch(t){T.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=t),function ce(a){for(;a;){const{closed:i,destination:n,isStopped:t}=a;if(i||t)return!1;a=n&&n instanceof k?n:null}return!0}(n)?n.error(t):console.warn(t)}}forEach(n,t){return new(t=J(t))((s,l)=>{let d;d=this.subscribe(p=>{try{n(p)}catch(y){l(y),d&&d.unsubscribe()}},l,s)})}_subscribe(n){const{source:t}=this;return t&&t.subscribe(n)}[fe](){return this}pipe(...n){return 0===n.length?this:function _e(a){return 0===a.length?he:1===a.length?a[0]:function(n){return a.reduce((t,s)=>s(t),n)}}(n)(this)}toPromise(n){return new(n=J(n))((t,s)=>{let l;this.subscribe(d=>l=d,d=>s(d),()=>t(l))})}}return a.create=i=>new a(i),a})();function J(a){if(a||(a=Promise),!a)throw new Error("no Promise impl found");return a}class ge{constructor(i,n){this.compare=i,this.keySelector=n}call(i,n){return n.subscribe(new me(i,this.compare,this.keySelector))}}class me extends k{constructor(i,n,t){super(i),this.keySelector=t,this.hasKey=!1,"function"==typeof n&&(this.compare=n)}compare(i,n){return i===n}_next(i){let n;try{const{keySelector:s}=this;n=s?s(i):i}catch(s){return this.destination.error(s)}let t=!1;if(this.hasKey)try{const{compare:s}=this;t=s(this.key,n)}catch(s){return this.destination.error(s)}else this.hasKey=!0;t||(this.key=n,this.destination.next(i))}}const P=(()=>{function a(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return a.prototype=Object.create(Error.prototype),a})();class be extends S{constructor(i,n){super(),this.subject=i,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const i=this.subject,n=i.observers;if(this.subject=null,!n||0===n.length||i.isStopped||i.closed)return;const t=n.indexOf(this.subscriber);-1!==t&&n.splice(t,1)}}class ye extends k{constructor(i){super(i),this.destination=i}}let W=(()=>{class a extends z{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[q](){return new ye(this)}lift(n){const t=new ee(this,this);return t.operator=n,t}next(n){if(this.closed)throw new P;if(!this.isStopped){const{observers:t}=this,s=t.length,l=t.slice();for(let d=0;d<s;d++)l[d].next(n)}}error(n){if(this.closed)throw new P;this.hasError=!0,this.thrownError=n,this.isStopped=!0;const{observers:t}=this,s=t.length,l=t.slice();for(let d=0;d<s;d++)l[d].error(n);this.observers.length=0}complete(){if(this.closed)throw new P;this.isStopped=!0;const{observers:n}=this,t=n.length,s=n.slice();for(let l=0;l<t;l++)s[l].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(n){if(this.closed)throw new P;return super._trySubscribe(n)}_subscribe(n){if(this.closed)throw new P;return this.hasError?(n.error(this.thrownError),S.EMPTY):this.isStopped?(n.complete(),S.EMPTY):(this.observers.push(n),new be(this,n))}asObservable(){const n=new z;return n.source=this,n}}return a.create=(i,n)=>new ee(i,n),a})();class ee extends W{constructor(i,n){super(),this.destination=i,this.source=n}next(i){const{destination:n}=this;n&&n.next&&n.next(i)}error(i){const{destination:n}=this;n&&n.error&&this.destination.error(i)}complete(){const{destination:i}=this;i&&i.complete&&this.destination.complete()}_subscribe(i){const{source:n}=this;return n?this.source.subscribe(i):S.EMPTY}}class ve extends W{constructor(i){super(),this._value=i}get value(){return this.getValue()}_subscribe(i){const n=super._subscribe(i);return n&&!n.closed&&i.next(this._value),n}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new P;return this._value}next(i){super.next(this._value=i)}}function te(a){let i=new XMLHttpRequest;return i.open("GET",a,!1),i.addEventListener("error",function(n){console.log(n)}),i.send(),i.responseText}function D(a,i){let n=i.lookupNamespaceURI(null),s=[],l=i.evaluate(a,i,function t(p){return{i:n}[p]||null},XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),d=l.iterateNext();for(;d;)s.push(d),d=l.iterateNext();return s}var re=function(a){var i=this;i.sounds=[],i._sprite=a.sprite,i._reading$=new W,i._tinySprite=Object.keys(a.sprite).map(n=>[i._sprite[n][0],n]),i._tinySprite.pop(),i._percentPlayed=new ve("0%"),i.sound=new Z.Howl({src:a.src,sprite:a.sprite,rate:a.rate}),requestAnimationFrame(i.step.bind(i))};re.prototype={play:function(a){var i=this;return i._spriteLeft=i._tinySprite,i.sound.play(a)},pause:function(){return this.sound.pause(),this.sound.id},goBack:function(a,i){var n=this;if(n._spriteLeft=n._tinySprite,n.sound.seek(a)-i>0){a=n.sound.seek(n.sound.seek(a)-i,a);for(var t=n.sound.seek(a),s=0;s<n._spriteLeft.length;s++)1e3*t>=n._spriteLeft[s][0]&&(n._reading$.next(n._spriteLeft[s][1]),n._spriteLeft=n._spriteLeft.slice(s,n._spriteLeft.length))}else a=n.sound.seek(0,a),n._reading$.next(n._spriteLeft[0][1]);return a},goTo:function(t,i){var n=this;n._spriteLeft=n._tinySprite,t=n.sound.seek(i,t);for(var s=n.sound.seek(t),l=0;l<n._spriteLeft.length;l++)1e3*s>=n._spriteLeft[l][0]&&(n._reading$.next(n._spriteLeft[l][1]),n._spriteLeft=n._spriteLeft.slice(l,n._spriteLeft.length));return t},stop:function(){return this._reading$.next(""),this.sound.stop()},step:function(){for(var a=this,i=0;i<a.sounds.length;i++){for(var n=a.sound.seek()||0,t=0;t<a._spriteLeft.length;t++)n>0&&1e3*n>=a._spriteLeft[t][0]&&(a._reading$.next(a._spriteLeft[t][1]),a._spriteLeft=a._spriteLeft.slice(t,a._spriteLeft.length));let s=(n/a.sound.duration()*100||0)+"%";a.sounds[i].style.width=s,a.sounds[i].setAttribute("offset",s)}requestAnimationFrame(a.step.bind(a))}};const O=class{constructor(a){(0,_.r)(this,a),this.playback_rate=1,this.showGuide=!1,this.hasTextTranslations=!1,this.assetsStatus={AUDIO:0,XML:0,SMIL:0},this.Guide=()=>(0,_.h)("button",{class:"scroll-guide__container ripple ui-button theme--"+this.theme,onClick:()=>this.hideGuideAndScroll()},(0,_.h)("span",{class:"scroll-guide__text theme--"+this.theme},this.returnTranslation("re-align",this.language))),this.Overlay=()=>(0,_.h)("object",{onClick:i=>this.goToSeekFromProgress(i),id:"overlay__object",type:"image/svg+xml",data:this.svgOverlay}),this.RemoveImg=i=>(0,_.h)("button",{"data-cy":"delete-button","aria-label":"Delete",title:"Delete image",onClick:()=>this.deleteImage(i),id:"img-remover",class:"ripple theme--"+this.theme+" background--"+this.theme},(0,_.h)("i",{class:"material-icons"},"delete")),this.Img=i=>(0,_.h)("div",{class:"image__container page__col__image theme--"+this.theme},(0,_.h)("img",{alt:"image",class:"image",src:this.urlTransform(i.url)})),this.ImgPlaceHolder=i=>(0,_.h)("div",{class:"image__container page__col__image theme--"+this.theme},(0,_.h)("div",{class:"drop-area"},(0,_.h)("form",{class:"my-form"},(0,_.h)("p",{class:"theme--"+this.theme},"Upload an image for this page with the file dialog below"),(0,_.h)("input",{type:"file",class:"fileElem",id:"fileElem--"+i.pageData.id,accept:"image/*",onChange:n=>this.handleFiles(n.target.files[0],i)}),(0,_.h)("label",{class:"button",htmlFor:"fileElem--"+i.pageData.id},"Select some files")))),this.PageCount=i=>(0,_.h)("div",{class:"page__counter color--"+this.theme},"Page"," ",(0,_.h)("span",{"data-cy":"page-count__current"},i.currentPage)," / ",(0,_.h)("span",{"data-cy":"page-count__total"},i.pgCount)),this.Page=i=>(0,_.h)("div",{class:"page page__container page--multi animate-transition  theme--"+this.theme+" "+(i.pageData.attributes.class?i.pageData.attributes.class.value:""),id:i.pageData.id},this.parsed_text.length>1?(0,_.h)(this.PageCount,{pgCount:this.parsed_text.length,currentPage:this.parsed_text.indexOf(i.pageData)+1}):null,(0,_.h)("span",{id:"image-container"},"EDIT"===this.mode&&i.pageData.img?(0,_.h)(this.RemoveImg,{pageData:i.pageData}):null,i.pageData.img?(0,_.h)(this.Img,{url:i.pageData.img}):null),"EDIT"!==this.mode||i.pageData.img?null:(0,_.h)(this.ImgPlaceHolder,{pageData:i.pageData}),(0,_.h)("div",{class:"page__col__text paragraph__container theme--"+this.theme},i.pageData.paragraphs.map(n=>(0,_.h)(this.Paragraph,{sentences:Array.from(n.childNodes),attributes:n.attributes})))),this.Paragraph=i=>(0,_.h)("div",{class:"paragraph sentence__container theme--"+this.theme+" "+(i.attributes.class?i.attributes.class.value:"")},i.sentences.map(n=>n.childNodes.length>0&&(0,_.h)(this.Sentence,{words:Array.from(n.childNodes),attributes:n.attributes}))),this.Sentence=i=>{!this.hasTextTranslations&&i.attributes.class&&(this.hasTextTranslations=null!=i.attributes.class.value.match("translation"));let n={};return i.attributes&&i.attributes["xml:lang"]&&(n.lang=i.attributes["xml:lang"].value),i.attributes&&i.attributes.lang&&(n.lang=i.attributes.lang.value),(0,_.h)("div",Object.assign({},n,{class:"sentence "+(i.attributes.class?i.attributes.class.value:"")}),i.words.map((t,s)=>{if("#text"===t.nodeName)return(0,_.h)(this.NonWordText,{text:t.textContent,attributes:t.attributes,id:(i.attributes.id?i.attributes.id.value:"P")+"text"+s});if("w"===t.nodeName)return(0,_.h)(this.Word,{text:t.textContent,id:t.id,attributes:t.attributes});if(t){let l={};return t.attributes["xml:lang"]&&(l.lang=i.attributes["xml:lang"].value),t.attributes.lang&&(l.lang=i.attributes.lang.value),(0,_.h)("span",Object.assign({},l,{class:"sentence__text theme--"+this.theme+" "+t.className,id:t.id?t.id:"text_"+s}),t.textContent)}}))},this.NonWordText=i=>{let n={};return i.attributes&&i.attributes["xml:lang"]&&(n.lang=i.attributes["xml:lang"].value),i.attributes&&i.attributes.lang&&(n.lang=i.attributes.lang.value),(0,_.h)("span",Object.assign({},n,{class:"sentence__text theme--"+this.theme,id:i.id}),i.text)},this.Word=i=>{let n={};return i.attributes&&i.attributes["xml:lang"]&&(n.lang=i.attributes["xml:lang"].value),i.attributes&&i.attributes.lang&&(n.lang=i.attributes.lang.value),(0,_.h)("span",Object.assign({},n,{class:"sentence__word theme--"+this.theme+" "+(i&&i.attributes.class?i.attributes.class.value:""),id:i.id,onClick:t=>this.playSprite(t)}),i.text)},this.PlayControl=()=>(0,_.h)("button",{"data-cy":"play-button",disabled:!this.isLoaded,"aria-label":"Play",title:"Play audio recording",onClick:()=>{this.playing?this.pause():this.play()},class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,_.h)("i",{class:"material-icons"},this.playing?"pause":"play_arrow")),this.ReplayControl=()=>(0,_.h)("button",{"data-cy":"replay-button",disabled:!this.isLoaded,"aria-label":"Rewind",title:"Replay audio recording",onClick:()=>this.goBack(5),class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,_.h)("i",{class:"material-icons"},"replay_5")),this.StopControl=()=>(0,_.h)("button",{"data-cy":"stop-button",disabled:!this.isLoaded,"aria-label":"Stop",title:"Stop audio recording",onClick:()=>this.stop(),class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,_.h)("i",{class:"material-icons"},"stop")),this.PlaybackSpeedControl=()=>(0,_.h)("div",null,(0,_.h)("h5",{class:"control-panel__buttons__header color--"+this.theme},this.returnTranslation("speed",this.language)),(0,_.h)("input",{type:"range",min:"75",max:"125",value:100*this.playback_rate,class:"slider control-panel__control",id:"myRange",onInput:i=>this.changePlayback(i)})),this.StyleControl=()=>(0,_.h)("button",{"aria-label":"Change theme",onClick:()=>this.changeTheme(),title:"Change theme",class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,_.h)("i",{class:"material-icons-outlined"},"style")),this.FullScreenControl=()=>(0,_.h)("button",{"aria-label":"Full screen mode",onClick:()=>this.toggleFullscreen(),title:"Full screen mode",class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,_.h)("i",{class:"material-icons","aria-label":"Full screen mode"},this.fullscreen?"fullscreen_exit":"fullscreen")),this.TextTranslationDisplayControl=()=>(0,_.h)("button",{"data-cy":"translation-toggle","aria-label":"Toggle Translation",title:"Toggle translation",onClick:()=>this.toggleTextTranslation(),class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,_.h)("i",{class:"material-icons-outlined"},"subtitles")),this.ControlPanel=()=>(0,_.h)("div",{"data-cy":"control-panel",class:"control-panel theme--"+this.theme+" background--"+this.theme},(0,_.h)("div",{class:"control-panel__buttons--left"},(0,_.h)(this.PlayControl,null),(0,_.h)(this.ReplayControl,null),(0,_.h)(this.StopControl,null)),(0,_.h)("div",{class:"control-panel__buttons--center"},(0,_.h)(this.PlaybackSpeedControl,null)),(0,_.h)("div",{class:"control-panel__buttons--right"},this.hasTextTranslations&&(0,_.h)(this.TextTranslationDisplayControl,null),(0,_.h)(this.StyleControl,null),(0,_.h)(this.FullScreenControl,null))),this.text=void 0,this.alignment=void 0,this.audio=void 0,this.svgOverlay=void 0,this.theme="light",this.language="eng",this.cssUrl=void 0,this.useAssetsFolder=!0,this.pageScrolling="horizontal",this.mode="VIEW",this.playing=!1,this.fullscreen=!1,this.autoScroll=!0,this.isLoaded=!1,this.images=void 0}wheelHandler(a){if(this.el.shadowRoot.querySelector(".reading")&&(a.path[0].classList.contains("sentence__word")||a.path[0].classList.contains("sentence__container")||a.path[0].classList.contains("sentence"))&&this.autoScroll){let i=this.el.shadowRoot.querySelector(".reading");i&&(this.autoScroll=!this.inPageContentOverflow(i),this.showGuide=!this.autoScroll)}}urlTransform(a){return this.useAssetsFolder&&function i(n){return!/^(https?:[/]|assets)[/]\b/.test(n)}(a)&&!a.startsWith("blob")?"assets/"+a:a}buildSprite(a,i){return new re({src:[a],sprite:i,rate:this.playback_rate})}tagToQuery(a){return"#"+(a=a.replace(".","\\.")).replace("#","\\#")}returnWordClosestTo(a){let i=Object.keys(this.processed_alignment);i.pop();for(let n=1;n<i.length;n++)if(1e3*a>this.processed_alignment[i[n]][0]&&this.processed_alignment[i[n+1]]&&1e3*a<this.processed_alignment[i[n+1]][0])return this.el.shadowRoot.querySelector(this.tagToQuery(i[n]))}changePlayback(a){this.playback_rate=parseInt(a.currentTarget.value)/100,this.audio_howl_sprites.sound.rate(this.playback_rate)}goBack(a){this.autoScroll=!1,this.play_id&&this.audio_howl_sprites.goBack(this.play_id,a),setTimeout(()=>this.autoScroll=!0,100)}goTo(a){void 0===this.play_id&&(this.play(),this.pause()),this.autoScroll=!1,this.audio_howl_sprites.goTo(this.play_id,a/=1e3),setTimeout(()=>this.autoScroll=!0,100)}goToSeekAtEl(a){let n=a.currentTarget.id;return this.goTo(this.processed_alignment[n][0]),n}goToSeekFromProgress(a){let n=a.currentTarget.getBoundingClientRect();this.goTo((a.pageX-n.left)/n.width*this.duration*1e3)}pause(){this.playing=!1,this.audio_howl_sprites.pause()}play(){this.playing=!0,this.play_id=this.audio_howl_sprites.play(void 0!==this.play_id?this.play_id:"all"),this.animateProgress()}playSprite(a){let i=this.goToSeekAtEl(a);this.playing||this.audio_howl_sprites.play(i)}stop(){this.playing=!1,this.audio_howl_sprites.stop(),this.el.shadowRoot.querySelectorAll(".reading").forEach(a=>a.classList.remove("reading")),this.autoScroll||(this.autoScroll=!0,this.showGuide=!1)}toggleTextTranslation(){this.el.shadowRoot.querySelectorAll(".translation").forEach(a=>a.classList.toggle("invisible")),this.el.shadowRoot.querySelectorAll(".sentence__translation").forEach(a=>a.classList.toggle("invisible"))}addHighlightingTo(a){this.el.shadowRoot.querySelectorAll(".reading").forEach(i=>i.classList.remove("reading")),a.classList.add("reading")}animateProgressWithOverlay(){let a=this.el.shadowRoot.querySelector("#overlay__object"),i=a.contentDocument.querySelector("#progress-fill"),n=a.contentDocument.querySelector("#progress-trail"),t=a.contentDocument.querySelector("#progress-base");i.classList.add("stop-color--"+this.theme),t.classList.add("stop-color--"+this.theme),this.audio_howl_sprites.sounds.push(i),this.audio_howl_sprites.sounds.push(n),this.audio_howl_sprites.sound.once("end",()=>{this.audio_howl_sprites.sounds.forEach(s=>{s.setAttribute("offset","0%")}),this.el.shadowRoot.querySelectorAll(".reading").forEach(s=>s.classList.remove("reading")),this.playing=!1},this.play_id)}animateProgressDefault(a,i){let n=document.createElement("div");n.className="progress theme--"+this.theme,n.id=a.toString(),n.dataset.sprite=i;let t=this.tagToQuery(i);this.el.shadowRoot.querySelector(t).appendChild(n),this.audio_howl_sprites.sounds.push(n),this.audio_howl_sprites.sound.once("end",()=>{this.el.shadowRoot.querySelectorAll(".reading").forEach(s=>s.classList.remove("reading")),this.playing=!1},this.play_id)}animateProgress(a=this.play_id){this.svgOverlay?this.animateProgressWithOverlay():this.animateProgressDefault(a,"all")}changeFill(){let a=this.el.shadowRoot.querySelector(".sentence__word"),i=window.getComputedStyle(a).color,n=this.el.shadowRoot.querySelector("#overlay__object"),t=n.contentDocument.querySelector("#progress-fill"),s=n.contentDocument.querySelector("#progress-base");n.contentDocument.querySelector("#polygon").setAttribute("stroke",i),s.setAttribute("stop-color",i),t.setAttribute("stop-color",i)}getImages(){var a=this;return(0,V.Z)(function*(){return a.images})()}changeTheme(){var a=this;return(0,V.Z)(function*(){a.theme="light"===a.theme?"dark":"light"})()}static _getSentenceContainerOfWord(a){return a.parentElement.parentElement.parentElement}toggleFullscreen(){if(this.fullscreen){let a=this.el.ownerDocument;a.exitFullscreen?a.exitFullscreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.webkitExitFullscreen?a.webkitExitFullscreen():a.msExitFullscreen&&a.msExitFullscreen(),this.el.shadowRoot.getElementById("read-along-container").classList.remove("read-along-container--fullscreen")}else{let a=this.el.shadowRoot.getElementById("read-along-container");a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen(),this.el.shadowRoot.getElementById("read-along-container").classList.add("read-along-container--fullscreen")}this.fullscreen=!this.fullscreen}hideGuideAndScroll(){let a=this.el.shadowRoot.querySelector(".reading"),i=new IntersectionObserver(n=>{let[t]=n;t.isIntersecting&&(setTimeout(()=>{this.showGuide=!1,this.autoScroll=!0},100),i.unobserve(a))});i.observe(a),this.scrollTo(a)}inParagraphContentOverflow(a){let n=O._getSentenceContainerOfWord(a).getBoundingClientRect(),t=a.getBoundingClientRect(),s=t.right<n.left,l=t.right>n.right,d=new IntersectionObserver(p=>{let[y]=p;y.isIntersecting&&(setTimeout(()=>{this.showGuide=!1,this.autoScroll=!0},100),d.unobserve(a))});return d.observe(a),s||l}inPageContentOverflow(a){let n=this.el.shadowRoot.querySelector("#"+this.current_page).getBoundingClientRect(),t=a.getBoundingClientRect(),s=t.top+t.height>n.top+n.height,l=t.top+t.height<0,d=new IntersectionObserver(p=>{let[y]=p;y.isIntersecting&&(setTimeout(()=>{this.showGuide=!1,this.autoScroll=!0},100),d.unobserve(a))});return d.observe(a),l||s}inPage(a){let n=O._getSentenceContainerOfWord(a).getBoundingClientRect(),t=a.getBoundingClientRect(),s=t.top+t.height>n.top+n.height,l=t.top+t.height<0,d=new IntersectionObserver(p=>{let[y]=p;y.isIntersecting&&(setTimeout(()=>{this.showGuide=!1,this.autoScroll=!0},100),d.unobserve(a))});return d.observe(a),l||s}scrollToPage(a){let i=this.el.shadowRoot.querySelector(".pages__container"),n=this.el.shadowRoot.querySelector("#"+a);i.scrollBy({top:null!=this.pageScrolling.match("vertical")?n.offsetTop-i.scrollTop:0,left:null!=this.pageScrolling.match("vertical")?0:n.offsetLeft-i.scrollLeft,behavior:"smooth"}),n.scrollTo(0,0)}scrollByHeight(a){let i=O._getSentenceContainerOfWord(a),n=a.parentElement.getBoundingClientRect();i.scrollBy({top:i.getBoundingClientRect().height-n.height,left:0,behavior:"smooth"})}scrollByWidth(a){let i=O._getSentenceContainerOfWord(a),n=a.getBoundingClientRect();i.scrollTo({left:n.left-10,top:0,behavior:"smooth"})}scrollTo(a){a.scrollIntoView({behavior:"smooth"})}audioFailedToLoad(){this.isLoaded=!0,this.assetsStatus.AUDIO=2}audioLoaded(){this.isLoaded=!0,this.assetsStatus.AUDIO=1}disconnectedCallback(){this.stop()}componentDidUpdate(){this.svgOverlay&&this.changeFill()}componentWillLoad(){this.language.length<3&&(this.language=null!=this.language.match("fr")?"fra":"eng"),this.parsed_text=function xe(a){let i=te(a),t=(new DOMParser).parseFromString(i,"text/xml");return D('.//div[@type="page"]',t).map(d=>{let p=d.id,m=D(`.//div[@id='${p}']/graphic/@url`,t),e={id:p,paragraphs:D(`.//div[@id='${p}']/p`,t)};return m.length>0&&(e.img=m[0].nodeValue),d.attributes&&(e.attributes=d.attributes),e})}(this.text),this.images={};for(const[a,i]of this.parsed_text.entries())this.images[a]="img"in i?i.img:null;this.assetsStatus.XML=this.parsed_text.length?1:2}componentDidLoad(){this.processed_alignment=function Ae(a){let i=te(a),t=(new DOMParser).parseFromString(i,"text/xml"),s=D("/i:smil/i:body/i:par/i:text/@src",t).map(w=>{let e=w.value.split("#");return e[e.length-1]}),l=D("/i:smil/i:body/i:par/i:audio/@clipBegin",t).map(w=>1e3*w.value),d=D("/i:smil/i:body/i:par/i:audio/@clipEnd",t).map(w=>1e3*w.value),p=[];for(var y=0;y<l.length;y++)p.push(d[y]-l[y]);let m=function we(a){return a[0].map(function(i,n){return a.map(function(t){return t[n]})})}([l,p]),g={};for(y=0;y<s.length;y++)g[s[y]]=m[y];return g}(this.alignment),this.assetsStatus.SMIL=Object.keys(this.processed_alignment).length?1:2,this.audio_howl_sprites=new Z.Howl({src:[this.audio],preload:!1}),this.audio_howl_sprites.once("load",()=>{this.processed_alignment.all=[0,1e3*this.audio_howl_sprites.duration()],this.duration=this.audio_howl_sprites.duration(),this.audio_howl_sprites=this.buildSprite(this.audio,this.processed_alignment),this.reading$=this.audio_howl_sprites._reading$.pipe(function pe(a,i){return n=>n.lift(new ge(a,i))}()).subscribe(a=>{if(this.playing){let i=this.tagToQuery(a),n=this.el.shadowRoot.querySelector(i);this.el.shadowRoot.querySelectorAll(".reading").forEach(s=>s.classList.remove("reading")),n.classList.add("reading");let t=O._getSentenceContainerOfWord(n).parentElement.id;t!==this.current_page&&(void 0!==this.current_page&&this.scrollToPage(t),this.current_page=t),(n.getBoundingClientRect().left<0||0!==this.el.shadowRoot.querySelector("#"+t).getBoundingClientRect().left)&&this.scrollToPage(t),this.inPageContentOverflow(n)&&this.autoScroll&&(n.scrollIntoView(!1),this.scrollByHeight(n)),this.inParagraphContentOverflow(n)&&this.autoScroll&&(n.scrollIntoView(!1),this.scrollByWidth(n))}}),this.isLoaded=!0,this.assetsStatus.AUDIO=1}),this.audio_howl_sprites.load()}returnTranslation(a,i){void 0===i&&(i=this.language);let n={speed:{eng:"Playback Speed",fra:"Vitesse de Lecture"},"re-align":{eng:"Re-align with audio",fra:"R\xe9aligner avec l'audio"},"audio-error":{eng:"Error: The audio file could not be loaded",fra:"Erreur: le fichier audio n'a pas pu \xeatre charg\xe9"},"text-error":{eng:"Error: The text file could not be loaded",fra:"Erreur: le fichier texte n'a pas pu \xeatre charg\xe9"},"alignment-error":{eng:"Error: The alignment file could not be loaded",fra:"Erreur: le fichier alignement n'a pas pu \xeatre charg\xe9"},loading:{eng:"Loading...",fra:"Chargement en cours"}};return n[a]?n[a][i]:a}handleFiles(a,i){var n=this;return(0,V.Z)(function*(){let t=URL.createObjectURL(a),s=n.parsed_text.map(d=>d.id).indexOf(i.pageData.id);i.pageData.img=t;let l={};l[s]=t,n.images=Object.assign(Object.assign({},n.images),l)})()}deleteImage(a){let i=this.parsed_text.map(t=>t.id).indexOf(a.pageData.id);delete a.pageData.img;let n={};n[i]=null,this.images=Object.assign(Object.assign({},this.images),n)}render(){return(0,_.h)("div",{id:"read-along-container",class:"read-along-container"},(0,_.h)("h1",{class:"slot__header"},(0,_.h)("slot",{name:"read-along-header"})),(0,_.h)("h3",{class:"slot__subheader"},(0,_.h)("slot",{name:"read-along-subheader"})),this.assetsStatus.AUDIO&&(0,_.h)("p",{"data-cy":"audio-error",class:"alert status-"+this.assetsStatus.AUDIO+(1==this.assetsStatus.AUDIO?" fade":"")},(0,_.h)("span",{class:"material-icons-outlined"}," ",2==this.assetsStatus.AUDIO?"error":this.assetsStatus.AUDIO>0?"done":"pending_actions"),(0,_.h)("span",null,2==this.assetsStatus.AUDIO?this.returnTranslation("audio-error",this.language):this.assetsStatus.SMIL>0?"AUDIO":this.returnTranslation("loading",this.language))),this.assetsStatus.XML&&(0,_.h)("p",{"data-cy":"text-error",class:"alert status-"+this.assetsStatus.XML+(1==this.assetsStatus.XML?" fade":"")},(0,_.h)("span",{class:"material-icons-outlined"}," ",2==this.assetsStatus.XML?"error":this.assetsStatus.XML>0?"done":"pending_actions"),(0,_.h)("span",null,2==this.assetsStatus.XML?this.returnTranslation("text-error",this.language):this.assetsStatus.SMIL>0?"XML":this.returnTranslation("loading",this.language))),this.assetsStatus.SMIL&&(0,_.h)("p",{"data-cy":"alignment-error",class:"alert status-"+this.assetsStatus.SMIL+(1==this.assetsStatus.SMIL?" fade":"")},(0,_.h)("span",{class:"material-icons-outlined"}," ",2==this.assetsStatus.SMIL?"error":this.assetsStatus.SMIL>0?"done":"pending_actions"),(0,_.h)("span",null,2==this.assetsStatus.SMIL?this.returnTranslation("alignment-error",this.language):this.assetsStatus.SMIL>0?"SMIL":this.returnTranslation("loading",this.language))),(0,_.h)("div",{"data-cy":"text-container",class:"pages__container theme--"+this.theme+" "+this.pageScrolling},this.showGuide?(0,_.h)(this.Guide,null):null,1==this.assetsStatus.XML&&this.parsed_text.map(a=>(0,_.h)(this.Page,{pageData:a})),0==this.isLoaded&&(0,_.h)("div",{class:"loader"})),1==this.assetsStatus.SMIL&&(0,_.h)("div",{onClick:a=>this.goToSeekFromProgress(a),id:"all","data-cy":"progress-bar",class:"overlay__container theme--"+this.theme+" background--"+this.theme},this.svgOverlay?(0,_.h)(this.Overlay,null):null),1==this.assetsStatus.AUDIO&&(0,_.h)(this.ControlPanel,null),this.cssUrl&&null!=this.cssUrl.match(".css")&&(0,_.h)("link",{href:this.cssUrl,rel:"stylesheet"}))}get el(){return(0,_.g)(this)}};O.style="@font-face{font-family:'Karla';font-style:normal;font-weight:400;src:local('Karla'), local('Karla-Regular'), url('assets/fonts/qkBbXvYC6trAT7RbLtyU5rZPoAU.woff2') format('woff2');unicode-range:U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF}@font-face{font-family:'Karla';font-style:normal;font-weight:400;src:local('Karla'), local('Karla-Regular'), url('assets/fonts/qkBbXvYC6trAT7RVLtyU5rZP.woff2') format('woff2');unicode-range:U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD}@font-face{font-family:'Lato';font-style:normal;font-weight:400;src:local('Lato Regular'), local('Lato-Regular'), url('assets/fonts/S6uyw4BMUTPHjxAwXiWtFCfQ7A.woff2') format('woff2');unicode-range:U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF}@font-face{font-family:'Lato';font-style:normal;font-weight:400;src:local('Lato Regular'), local('Lato-Regular'), url('assets/fonts/S6uyw4BMUTPHjx4wXiWtFCc.woff2') format('woff2');unicode-range:U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD}@font-face{font-family:'Material Icons';font-style:normal;font-weight:400;src:url('assets/fonts/flUhRq6tzZclQEJ-Vdg-IuiaDsNcIhQ8tQ.woff2') format('woff2')}@font-face{font-family:'Material Icons Outlined';font-style:normal;font-weight:400;src:url('assets/fonts/gok-H7zzDkdnRel8-DQ6KAXJ69wP1tGnf4ZGhUcel5euIg.woff2') format('woff2')}.material-icons{font-family:'Material Icons';font-weight:normal;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased}.material-icons-outlined{font-family:'Material Icons Outlined';font-weight:normal;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased}.font-weight--100{font-weight:100}.font-weight--200{font-weight:200}.font-weight--300{font-weight:300}.font-weight--400{font-weight:400}.font-weight--500{font-weight:500}.font-weight--600{font-weight:600}.font-weight--700{font-weight:700}.font-weight--800{font-weight:800}.font-weight--900{font-weight:900}.shadowed{text-shadow:0.3px 0.2px black}.theme--light.sentence,.theme--light.page__col__image,.theme--light.page__container,.theme--light.scroll-guide__container{background-color:#fff}.theme--dark.sentence,.theme--dark.page__col__image,.theme--dark.page__container,.theme--dark.scroll-guide__container{background-color:#3c4369}.sentence__word,.sentence__text,.scroll-guide__text{line-height:1.5;border-radius:0.3125em;position:relative;padding:0.0625em;font-size:1em}.theme--light.ripple,.theme--light.reading,.theme--light.sentence__word,.theme--light.sentence__text,.theme--light.scroll-guide__text{color:#040508}.theme--dark.ripple,.theme--dark.reading,.theme--dark.sentence__word,.theme--dark.sentence__text,.theme--dark.scroll-guide__text{color:#fff}.theme--light.ripple:active,.theme--light.reading:active,.theme--light.sentence__word:hover{color:#fff;background:gray radial-gradient(circle, transparent 1%, gray 1%) center/15000%}.theme--dark.ripple:active,.theme--dark.reading:active,.theme--dark.sentence__word:hover{color:#fff;background:#a6a6a6 radial-gradient(circle, transparent 1%, #a6a6a6 1%) center/15000%}.theme--light.sentence__word.reading{color:#fff;background:#666666 radial-gradient(circle, transparent 1%, #666666 1%) center/15000%}.theme--dark.sentence__word.reading{color:#040508;background:#fff radial-gradient(circle, transparent 1%, #fff 1%) center/15000%}.theme--light.page__col__img-placeholder{border:0.046875em dotted gray}.theme--dark.page__col__img-placeholder{border:0.046875em dotted #a6a6a6}.theme--light.scroll-guide__container,.theme--light.overlay__container{border:0.046875em solid gray}.theme--dark.scroll-guide__container,.theme--dark.overlay__container{border:0.046875em solid #a6a6a6}.theme--light.page--multi,.theme--light.pages__container,.theme--light.control-panel{border-left:0.046875em solid gray}.theme--dark.page--multi,.theme--dark.pages__container,.theme--dark.control-panel{border-left:0.046875em solid #a6a6a6}.theme--light.page--multi,.theme--light.pages__container,.theme--light.control-panel{border-right:0.046875em solid gray}.theme--dark.page--multi,.theme--dark.pages__container,.theme--dark.control-panel{border-right:0.046875em solid #a6a6a6}.theme--light.pages__container{border-top:0.046875em solid gray}.theme--dark.pages__container{border-top:0.046875em solid #a6a6a6}.theme--light.control-panel{border-bottom:0.046875em solid gray}.theme--dark.control-panel{border-bottom:0.046875em solid #a6a6a6}.ripple:hover,.reading:hover,.sentence__word:hover{cursor:pointer}@viewport{width:device-width}button{border:0;cursor:pointer}html{background-color:#fff;box-sizing:border-box;height:100%}*:before,*:after{box-sizing:inherit}body{-webkit-font-smoothing:antialiased;color:#040508;font-family:\"Lato\", sans-serif;min-height:100%;overflow-x:hidden;overflow-y:hidden;text-rendering:optimizeLegibility}a{background:transparent;color:#c69;text-decoration:none;transition:color 0.2s;outline:none}a:active,a:focus{outline:none}img{height:90%;max-width:90%;object-fit:cover}h1,h2,h3,h4,h5,h6{font-family:\"Karla\", sans-serif;font-weight:normal}p,mat-chip,mat-tab-label,span,button,a{font-family:\"Lato\", sans-serif}.theme--light::-webkit-scrollbar{width:0.5em;height:0.5em}.theme--light::-webkit-scrollbar-track{background:#fff}.theme--light::-webkit-scrollbar-thumb{background:#040508;border-radius:0.3125em;height:0.625em;width:0.625em}.theme--dark::-webkit-scrollbar{width:0.5em;height:0.5em}.theme--dark::-webkit-scrollbar-track{background:#3c4369}.theme--dark::-webkit-scrollbar-thumb{background:#fff;border-radius:0.3125em;height:0.625em;width:0.625em}.bg-img{background-image:url(\"../assets/img/bg.jpg\");height:100vh;overflow:overlay;overflow-x:hidden;background-position:center;background-repeat:no-repeat;background-size:cover;min-height:100%}.shadow-box{box-shadow:0 0.3125rem 1rem 0 rgba(0, 0, 0, 0.24);padding:25px;background:rgba(255, 255, 255, 0.94);border-radius:5px}.font-xs{font-size:0.5em}.font-sm{font-size:0.75em}.font-md{font-size:1em}.font-lg{font-size:1.25em}.font-xl{font-size:1.5em}.font-xxl{font-size:2em}.faded{opacity:0.2;color:black}table{table-layout:fixed}.center{margin-left:auto;margin-right:auto;text-align:center}.container{max-width:80em}.background--light{background:#fff}.stop-color--light{fill:#fff}.color--light{color:#040508}.background--dark{background:#3c4369}.stop-color--dark{fill:#3c4369}.color--dark{color:#fff}.abs{position:absolute}.top-0{top:0}.left-0{left:0}.right-0{right:0}.top-5{top:0.3125em}.left-5{left:0.3125em}.right-5{right:0.3125em}.top-10{top:0.625em}.left-10{left:0.625em}.right-10{right:0.625em}.top-15{top:0.9375em}.left-15{left:0.9375em}.right-15{right:0.9375em}.top-20{top:1.25em}.left-20{left:1.25em}.right-20{right:1.25em}.top-25{top:1.5625em}.left-25{left:1.5625em}.right-25{right:1.5625em}.top-30{top:1.875em}.left-30{left:1.875em}.right-30{right:1.875em}.top-35{top:2.1875em}.left-35{left:2.1875em}.right-35{right:2.1875em}.top-40{top:2.5em}.left-40{left:2.5em}.right-40{right:2.5em}.top-45{top:2.8125em}.left-45{left:2.8125em}.right-45{right:2.8125em}.top-50{top:3.125em}.left-50{left:3.125em}.right-50{right:3.125em}.invisible{visibility:hidden !important}.control-panel{border-radius:0 0 0.3125em 0.3125em;position:relative;min-width:100%;display:inline-flex}.control-panel__buttons--left{width:25%;float:left;margin-top:0.3125em;padding:0.3125em}.control-panel__buttons--center{width:25%;text-align:center;margin:0 auto}.control-panel__buttons--right{width:25%;text-align:right;float:right;margin-top:0.3125em;margin-right:0.3125em}.control-panel__buttons__header{margin:0.3125em}.control-panel__control{border-radius:0.3125em;margin:0.5em auto}.control-panel__control:focus{outline:none}.settings{margin-left:0;margin-right:0;text-align:center}.settings__option__header{margin-bottom:0.5em}#waveform{background-size:contain;background-repeat:no-repeat;background-position:center center;width:100%;height:100%;position:absolute;top:0;left:0}.low{z-index:700}.overlay__container{width:100%;max-width:100%;height:3.125em;position:relative;z-index:8000}#overlay__object{z-index:700;max-height:100%;min-width:100%;fill:\"transparent\"}#overlay__object.theme--light{stroke:gray}#overlay__object.theme--dark{stroke:#a6a6a6}.scroll-guide__container{text-align:center;z-index:700;width:20%;position:fixed;left:50%;transform:translate(-50%, 0)}.scroll-guide__text{font-size:1.25em}.pages__container{overflow:auto;max-height:55vh;height:100%;max-width:100%;width:100%;position:relative;display:-webkit-inline-flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;border-radius:0.3125em 0.3125em 0 0}.page{overflow-y:hidden;overflow-x:auto;flex-grow:1;min-width:99.6%;width:100%;max-width:55em}.page__container{display:grid;grid-template-columns:[col-start] [col-end];grid-template-rows:[row-start] 5% [row-end] 95%;grid-template-areas:\"image page-no\" \"image text\";justify-items:stretch}.page__counter{grid-area:page-no;margin:0.625em 0 0 0.9375em;text-align:right;padding-right:0.9375em;max-height:5rem}.page__col__image{grid-area:image;float:left;max-height:100%;text-align:center;margin:5%;padding:0;border-radius:0 0 0 0;position:relative}.page__col__image img{height:100%;max-width:95%;object-fit:contain}.page__col__img-placeholder{cursor:pointer}.page__col__text{grid-area:text}.page.two-column-layout-page{grid-template-columns:40% auto}.page.one-column-layout-page{display:grid;grid-template-columns:auto;grid-template-rows:[row-start] 5% [row-end] 95%;grid-template-areas:\"page-no\" \"text\";justify-items:stretch}.page.one-column-layout-page .page__col__image{grid-area:text}.hide-page-counter .page__counter{display:none}.pages__container.vertical{flex-direction:column !important}.pages__container.vertical>.page{min-height:100%}.paragraph__container{overflow-y:auto;min-width:40%;padding-bottom:0.75em}.sentence{margin:0 1.5em;text-align:left;max-width:90%}.sentence__container{margin:3.75em 0.625em 3.75em 0.625em;scroll-behavior:smooth;max-width:100%;position:relative;overflow-y:auto;overflow-x:hidden}.sentence__container__buttons{position:absolute;top:0;right:0}.sentence__word{font-size:1.5em}.sentence__translation .sentence__text,.sentence__translation .sentence__word{color:#777;font-style:italic;font-size:95%}.paragraph.visually_aligned .sentence .sentence__text,.paragraph.visually_aligned .sentence .sentence__word{display:table-cell}.paragraph.visually_aligned .sentence .sentence__text:empty{display:none}.paragraph.visually_aligned{display:table}.paragraph.visually_aligned .sentence{display:table-row}.read-along-container{max-width:75em;margin:0 auto;max-height:98vh;height:98vh;overflow-Y:hidden;overflow-X:hidden;padding:0.3125em;position:relative}.read-along-container--fullscreen{max-width:80%;min-width:80%}.slot__header{margin-bottom:0.3125em}.slot__subheader{margin-top:0;margin-left:1em}.loader{border:16px solid #eee;border-radius:50%;border-right-color:#aa0;border-bottom-color:#a33;border-left-color:#111;width:10rem;height:10rem;-webkit-animation:spin 3s linear infinite;animation:spin 3s linear infinite;position:fixed;top:calc(50vh - 10rem);left:calc(50vw - 10rem);z-index:1000;box-shadow:0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg)}}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.alert{position:relative;padding:1rem 1rem;margin-bottom:1rem;border:1px solid transparent;border-radius:0.25rem;transition-delay:2s;transition:visibility 5s height 5s}.alert.status-1{color:#0f5132;background-color:#d1e7dd;border-color:#badbcc}.alert.status-2{color:#842029;background-color:#f8d7da;border-color:#f5c2c7}.alert.fade{visibility:collapse;height:0 !important;overflow:hidden !important;line-height:0 !important;padding:0 !important;margin:0 !important;border:0 !important}.animate-transition,.ripple,.reading{transition:background 0.4s}.animate-transition:active,.ripple:active,.reading:active{transition:background 0s}.ripple,.reading{background-position:center;padding:0.0625em}.ripple:active,.reading:active{background-size:100%}.progress{position:absolute;top:0;left:0;height:100%;width:0}.progress.theme--light{background-color:rgba(128, 128, 128, 0.2)}.progress.theme--dark{background-color:rgba(166, 166, 166, 0.2)}.drop-area{border:2px dashed #ccc;border-radius:20px;width:400px;font-family:sans-serif;margin:50px auto;padding:20px}.drop-area.highlight{border-color:purple}p{margin-top:0}.my-form{margin-bottom:10px}#gallery{margin-top:10px}#gallery img{width:150px;margin-bottom:10px;margin-right:10px;vertical-align:middle}.button{display:inline-block;padding:10px;background:#ccc;cursor:pointer;border-radius:5px;border:1px solid #ccc}.button:hover{background:#ddd}.fileElem{display:none}#img-remover{margin:60px;position:absolute;z-index:9999;border-radius:50px;color:red}#image-container{display:contents}"}}]);